* avy

#+BEGIN_SRC emacs-lisp
  (use-package avy
    :ensure t)
#+END_SRC

* beacon mode

#+BEGIN_SRC emacs-lisp
  (use-package beacon
    :ensure t
    :diminish beacon-mode
    :config
    (beacon-mode))
#+END_SRC

* Clojure

** clojure mode

  #+BEGIN_SRC emacs-lisp
        (use-package clojure-mode
          :ensure t
          :config
          (add-hook 'clojure-mode-hook #'paredit-mode)
          (add-hook 'clojure-mode-hook #'subword-mode)
          (add-hook 'clojure-mode-hook #'rainbow-delimiters-mode)
          (add-hook 'clojure-mode-hook #'show-paren-mode))
  #+END_SRC

** cider

#+BEGIN_SRC emacs-lisp
  (defvar cider-repl-conditions
    "(cond
      (and (resolve 'user/run) (resolve 'user/browser-repl))
      (eval '(do (user/run) (user/browser-repl)))

      (try
       (require 'figwheel-sidecar.repl-api)
       (resolve 'figwheel-sidecar.repl-api/start-figwheel!)
       (catch Throwable _))
       (eval '(do (figwheel-sidecar.repl-api/start-figwheel!)
                  (figwheel-sidecar.repl-api/cljs-repl)))

      (try
       (require 'cemerick.piggieback)
       (resolve 'cemerick.piggieback/cljs-repl)
       (catch Throwable _))
      (eval '(cemerick.piggieback/cljs-repl (cljs.repl.rhino/repl-env)))

      :else
      (throw (ex-info \"Failed to initialize CLJS repl.\" {})))")

  (use-package cider
    :ensure t
    :config
    (add-hook 'cider-repl-mode-hook #'paredit-mode)
    (add-hook 'cider-repl-mode-hook #'rainbow-delimiters-mode)
    (setq cider-cljs-lein-repl cider-repl-conditions))
#+END_SRC

** clj-refactor

#+BEGIN_SRC emacs-lisp
  (use-package clj-refactor
    :ensure t
    :config
    (add-hook 'clojure-mode-hook #'(lambda ()
                                     (clj-refactor-mode t)
                                     (cljr-add-keybindings-with-prefix "C-c C-m")
                                     (yas-minor-mode t))))
#+END_SRC

** clojure-cheatsheet

#+BEGIN_SRC emacs-lisp
  (use-package clojure-cheatsheet
    :ensure t)
#+END_SRC

* company

#+BEGIN_SRC emacs-lisp
  (use-package company
    :ensure t
    :diminish company-mode
    :config
    (global-company-mode)
    (setq company-idle-delay 0.2)
    (setq company-minimum-prefix-length 1)
    (setq company-show-numbers t)
    (setq company-tooltip-limit 20))
#+END_SRC

* Counsel

#+BEGIN_SRC emacs-lisp
  (use-package counsel
    :ensure t
    :bind
    ("C-s" . swiper)
    ("M-x" . counsel-M-x)
    ("C-x C-f" . counsel-find-file)
    ("C-c k" . counsel-ag)
    :config
    (ivy-mode 1)
    (setq ivy-use-virtual-buffers t)
    (setq ivy-count-format "(%d/%d) "))
#+END_SRC

* Elpy

#+BEGIN_SRC emacs-lisp
  (use-package elpy
    :ensure t
    :config
    (elpy-enable))
#+END_SRC

* evil

#+BEGIN_SRC emacs-lisp
  (use-package evil
    :ensure t
    :config
    (evil-put-property 'evil-state-properties 'normal   :tag " NORMAL ")
    (evil-put-property 'evil-state-properties 'insert   :tag " INSERT ")
    (evil-put-property 'evil-state-properties 'visual   :tag " VISUAL ")
    (evil-put-property 'evil-state-properties 'motion   :tag " MOTION ")
    (evil-put-property 'evil-state-properties 'emacs    :tag " EMACS ")
    (evil-put-property 'evil-state-properties 'replace  :tag " REPLACE ")
    (evil-put-property 'evil-state-properties 'operator :tag " OPERTR "))

  (use-package evil-surround
    :ensure t
    :config
    (global-evil-surround-mode 1))

  (use-package evil-leader
    :ensure t
    :config
    (global-evil-leader-mode)
    (evil-mode t) ;; must be set after evil leader mode
    (evil-leader/set-leader "<SPC>")
    (evil-leader/set-key
      ;; avy
      "a1" 'avy-goto-char
      "a2" 'avy-goto-char-2
      "at" 'avy-goto-char-timer
      "al" 'avy-goto-line
      "aw" 'avy-goto-word-1
      ;; paredit
      "pw)" 'paredit-wrap-round
      "pw]" 'paredit-wrap-square
      "pw}" 'paredit-wrap-curly
      "pfs" 'paredit-forward-slurp-sexp
      "pbs" 'paredit-backward-slurp-sexp
      "pfb" 'paredit-forward-barf-sexp
      "pbb" 'paredit-backward-barf-sexp))

  (use-package evil-commentary
    :ensure t
    :diminish evil-commentary-mode
    :config
    (evil-commentary-mode t))
#+END_SRC

* Exec-Path-From-Shell


#+BEGIN_SRC emacs-lisp
  (use-package exec-path-from-shell
    :ensure t
    :config
    (exec-path-from-shell-initialize))
#+END_SRC

* git-gutter

#+BEGIN_SRC emacs-lisp
  (use-package git-gutter
    :ensure t
    :diminish git-gutter-mode
    :config
    (global-git-gutter-mode t)
    (custom-set-variables '(git-gutter:update-interval 2)))
#+END_SRC

* Highlight Indent Guides

#+BEGIN_SRC emacs-lisp
  (use-package highlight-indent-guides
    :ensure t
    :config
    (setq highlight-indent-guides-method 'character))
#+END_SRC

* iedit

#+BEGIN_SRC emacs-lisp
  (use-package iedit
    :ensure t)
#+END_SRC

* Js2-mode

#+BEGIN_SRC emacs-lisp
  (use-package js2-mode
    :ensure t
    :mode "\\.js\\'")
#+End_SRC

* Magit

#+BEGIN_SRC emacs-lisp
  (use-package magit
    :ensure t
    :bind
    (("C-x g" . magit-status)))
#+END_SRC

* markdown-mode

#+BEGIN_SRC emacs-lisp
  (use-package markdown-mode
    :ensure t
    :commands (markdown-mode gfm-mode)
    :mode (("README\\.md\\'" . gfm-mode)
           ("\\.md\\'" . markdown-mode)
           ("\\.markdown\\'" . markdown-mode))
    :init (setq markdown-command "multimarkdown"))
#+END_SRC

* Neotree

#+BEGIN_SRC emacs-lisp
  (use-package neotree
    :ensure t
    :config
    (setq neo-theme (if (display-graphic-p) 'icons 'arrow))
    (setq projectile-switch-project-action 'neotree-projectile-action)
    (add-hook 'neotree-mode-hook
              (lambda ()
                (evil-define-key 'normal neotree-mode-map (kbd "q") 'neotree-hide)
                (evil-define-key 'normal neotree-mode-map (kbd "RET") 'neotree-enter))))
#+END_SRC
* Org

#+BEGIN_SRC emacs-lisp
  (use-package org
    :ensure t
    :config
    (setq org-directory "~/Nextcloud/org")
    (setq org-agenda-files '("~/Nextcloud/org"))
    (setq org-log-done 'time)

    (setq org-startup-indented t)
    (setq org-startup-with-inline-images t)
    (setq org-startup-with-latex-preview t)
    (plist-put org-format-latex-options :scale 2.5)
    (setq org-src-fontify-natively t)

    (require 'ob-clojure)
    (org-babel-do-load-languages
     'org-babel-load-languages
     '((clojure . t)
       (emacs-lisp . t)
       (ditaa . t)))
    (setq org-babel-clojure-backend 'cider)
    (setq org-confirm-babel-evaluate nil)

    (add-hook 'org-mode-hook (lambda ()
                               (setq fill-column 90)
                               (turn-on-auto-fill)))

    (setq org-ditaa-jar-path "/usr/local/Cellar/ditaa/0.10/libexec/ditaa0_10.jar"))

  (use-package org-bullets
    :ensure t
    :config
    (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1))))
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (use-package ox-reveal
    :ensure t)
#+END_SRC

** org-journal

#+BEGIN_SRC emacs-lisp
    (use-package org-journal
      :ensure t
      :config
      (setq org-journal-dir "~/Dropbox/org/journal"))
#+End_SRC

* paredit

  #+BEGIN_SRC emacs-lisp
    (use-package paredit
      :ensure t)
  #+END_SRC

* projectile

  #+BEGIN_SRC emacs-lisp
    (use-package projectile
      :ensure t
      :diminish projectile-mode
      :config
      (projectile-global-mode 1))
  #+END_SRC

#+BEGIN_SRC emacs-lisp
  (use-package counsel-projectile
    :ensure t
    :config
    (counsel-projectile-on))
#+END_SRC

* Rainbow Mode

#+BEGIN_SRC emacs-lisp
    (use-package rainbow-mode
      :ensure t
      :config
      (add-hook 'prog-mode-hook 'rainbow-mode))
#+END_SRC
* rainbow-delimiters

  #+BEGIN_SRC emacs-lisp
    (use-package rainbow-delimiters
      :ensure t)
  #+END_SRC

* swift-mode

#+BEGIN_SRC emacs-lisp
  (use-package swift-mode
    :ensure t)
#+END_SRC

* try

#+BEGIN_SRC emacs-lisp
  (use-package try
    :ensure t)
#+END_SRC

* UI
** General

#+BEGIN_SRC emacs-lisp
  (setq inhibit-startup-message t)
  (setq inhibit-splash-screen t)
  (setq inhibit-startup-echo-area-message t)
  (setq ring-bell-function 'ignore)

  (tool-bar-mode -1)
  (fset 'yes-or-no-p 'y-or-n-p)
  (blink-cursor-mode -1)
  (global-auto-revert-mode t)
  (global-hl-line-mode 1)
  (line-number-mode t)
  (column-number-mode t)
  (size-indication-mode t)
  (scroll-bar-mode -1)
  (add-hook 'before-save-hook #'delete-trailing-whitespace)
  (menu-bar-mode -1)

  (cond
   ((eq system-type 'darwin)
    (set-default-font "Source Code Pro Light 14"))
   ((eq system-type 'gnu/linux)
    (set-default-font "Source Code Pro 11")))

#+END_SRC

** Mode Line

#+BEGIN_SRC emacs-lisp
  (use-package all-the-icons :ensure t)
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (use-package spaceline
    :ensure t
    :config
    (setq-default mode-line-format '("%e" (:eval (spaceline-ml-main)))))

  (use-package spaceline-config
    :ensure spaceline
    :config
    (setq-default
     powerline-height 50
     powerline-default-separator 'utf-8))
#+END_SRC

#+BEGIN_SRC emacs-lisp
  ;; Stolen from:
  ;; https://github.com/domtronn/all-the-icons.el/wiki/Spaceline
  (spaceline-define-segment
      ati-mode-icon "An `all-the-icons' segment for the current buffer mode"
      (let ((icon (all-the-icons-icon-for-buffer)))
        (unless (symbolp icon) ;; This implies it's the major mode
          (propertize icon
                      'help-echo (format "Major-mode: `%s`" major-mode)
                      'display '(raise 0.0)
                      'face `(:height 1.0 :family ,(all-the-icons-icon-family-for-buffer) :inherit)))))
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (spaceline-install
   'main
   '(
     ((buffer-modified) :face highlight-face)
     ((remote-host buffer-id) :face highlight-face)
     (process :when active)
     )
   '(
     (line-column :when active)
     (version-control :when active)
     ((ati-mode-icon) :face default-face)
      )
   )
#+END_SRC

** Themes

#+BEGIN_SRC emacs-lisp
  (use-package atom-one-dark-theme :ensure t)
  (use-package zenburn-theme :ensure t)
  (use-package solarized-theme
    :ensure t
    :config
    (setq solarized-high-contrast-mode-line t)
    (setq solarized-use-more-italic t)
    (setq x-underline-at-descent-line t))

  (load-theme 'solarized-dark)
#+END_SRC

* undo-tree

#+BEGIN_SRC emacs-lisp
  (use-package undo-tree
    :ensure t
    :diminish undo-tree-mode)
#+END_SRC

* Variables

#+BEGIN_SRC emacs-lisp
  (setq user-full-name "Tobias Ostner"
        user-mail-address "tobias.ostner@gmail.com")

  ;; (setq ido-enable-flex-matching t)
  ;; (setq ido-everywhere t)
  ;; (setq ido-use-virtual-buffers t)
  ;; (setq ido-create-new-buffer 'always)
  ;; (setq ido-use-filename-at-point t)

  (setq require-final-newline t)
  (setq-default tab-width 8)
  (setq whitespace-style '(face space-mark indentation trailing))
  (setq whitespace-display-mappings
        '((space-mark 32 [183] [46])
          (space-mark 160 [164] [95])
          (space-mark 2208 [2212] [95])
          (space-mark 2336 [2340] [95])
          (space-mark 3616 [3620] [95])
          (space-mark 3872 [3876] [95])))
  (setq-default indent-tabs-mode nil)

  (setq backup-directory-alist
        `((".*" . ,temporary-file-directory)))
  (setq auto-save-file-name-transforms
        `((".*" ,temporary-file-directory t)))
  (setq make-backup-files nil)

  (defalias 'list-buffers 'ibuffer)
#+END_SRC

* web-mode

#+BEGIN_SRC emacs-lisp
  (use-package web-mode
    :ensure t
    :mode "\\.html?\\'")
#+END_SRC

* which-key

#+BEGIN_SRC emacs-lisp
  (use-package which-key
    :ensure t
    :diminish which-key-mode
    :config
    (which-key-mode))
#+END_SRC

* yaml-mode

#+BEGIN_SRC emacs-lisp
  (use-package yaml-mode
    :ensure t
    :mode (("\\.yml\\'" . yaml-mode)))

#+END_SRC
* Dockerfile-mode

#+BEGIN_SRC emacs-lisp
  (use-package dockerfile-mode
    :ensure t
    :mode "Dockerfile\\'")
#+END_SRC
